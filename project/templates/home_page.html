<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>å‹•ç‰©ç ”ç©¶é™¢</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/home_page.css') }}">
</head>

<body>
  <div class="hp-container">
    <!-- é ‚éƒ¨å€åŸŸ -->
    <div class="hp-top-area">
      <div class="hp-top-left">
        <div class="hp-title">å‹•ç‰©ç ”ç©¶é™¢</div>
      </div>
      <div class="hp-top-right">
        <div class="player-info">ç ”ç©¶é»æ•¸: 000</div>
      </div>
    </div>

    <!-- ä¸»è¦å…§å®¹å€åŸŸ -->
    <div class="hp-main-content">
      <div class="left-menu">
        <div class="menu-item">
          <span class="menu-icon">ğŸ“–</span>
          <span>ä¸»ç·šåŠ‡æƒ…</span>
        </div>
        <div class="menu-item">
          <span class="menu-icon">ğŸ¦Š</span>
          <span>å‹•ç‰©åœ–é‘‘</span>
        </div>
      </div>

      <!-- å°è©±å€ -->
      <div class="dialogue-area">
        <div class="character-info">
          <div class="character-avatar">ğŸ¦Š</div>
          <div class="character-name">ANIMAL</div>
        </div>
        
        <div class="dialogue-text" id="dialogue-text">
          =====æ­¡è¿è©¢å•å•é¡Œï¼=====
        </div>
        <div class="dialogue-options">
          <button class="dialogue-option">=====123=====</button>
          <button class="dialogue-option">=====456======</button>
          <button class="dialogue-option">=====789=====</button>
        </div>
        <!-- AI Agent èŠå¤©è¼¸å…¥å€ -->
        <div class="ai-chat-input">
          <input type="text" id="user-input" placeholder="è¼¸å…¥å•é¡Œèˆ‡å‹•ç‰©å°è©±...">
          <button id="send-button" onclick="sendMessage()">ç™¼é€</button>
        </div>
      </div>
    </div>
  </div>
  
  <script src="{{ url_for('static', filename='js/home_page.js') }}"></script>
  <script>
    // Send message to the Flask backend and update the dialogue
    async function sendMessage() {
      const userInput = document.getElementById('user-input').value;
      const dialogueText = document.getElementById('dialogue-text');
      if (userInput.trim() === '') return;

      // Update the dialogue with the user's input
      dialogueText.innerHTML += `<div><strong>ä½ :</strong> ${userInput}</div>`;

      // Send the message to the Flask backend
      const response = await fetch('/call_llm', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: `message=${encodeURIComponent(userInput)}`,
      });

      const data = await response.text();
      
      // Update the dialogue with the AI's response
      dialogueText.innerHTML += `<div><strong>å‹•ç‰©:</strong> ${data}</div>`;
      
      // Clear the input field
      document.getElementById('user-input').value = '';
      
      // Scroll to the bottom of the dialogue
      dialogueText.scrollTop = dialogueText.scrollHeight;
    }
  </script>
</body>
</html>