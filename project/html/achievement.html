<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>æˆå°±ç³»çµ± - å‹•ç‰©ç ”ç©¶é™¢</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/achievement.css">
</head>

<body>
  <div class="hp-container">
    <!-- é ‚éƒ¨å€åŸŸ -->
    <div class="hp-top-area">
      <div class="hp-top-left">
        <div class="hp-title">å‹•ç‰©ç ”ç©¶é™¢</div>
        <div class="control-button">  <!--è²éŸ³icon-->
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#A0522D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
            <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
          </svg>
        </div>
        <div class="control-button">  <!--è³‡è¨Šicon-->
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#A0522D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
        </div>
      </div>
      <div class="hp-top-right">
        <div class="player-info">ç ”ç©¶é»æ•¸: 0</div>
        <div class="control-button">  <!--è¨­å®šicon-->
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#A0522D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
          </svg>
        </div>
      </div>
    </div>
    
    <!-- ä¸»è¦å…§å®¹å€åŸŸ -->
    <div class="hp-main-content">
      <!-- å·¦å´èœå–® -->
      <div class="left-menu">
        <div class="menu-item">
          <span class="menu-icon">ğŸ“–</span>
          <span>ä¸»ç·šåŠ‡æƒ…</span>
        </div>
        <div class="menu-item">
          <span class="menu-icon">ğŸ¦Š</span>
          <span>å‹•ç‰©åœ–é‘‘</span>
        </div>
        <div class="menu-item">
          <span class="menu-icon">ğŸ¾</span>
          <span>æ¢ç´¢åœ°åœ–</span>
        </div>
        <div class="menu-item">
          <span class="menu-icon">ğŸ§ª</span>
          <span>ç ”ç©¶å¯¦é©—å®¤</span>
        </div>
        <div class="menu-item active">
          <span class="menu-icon">ğŸ†</span>
          <span>æˆå°±ç³»çµ±</span>
        </div>
        <div class="menu-item">
          <span class="menu-icon">ğŸ’</span>
          <span>ç‰©å“èƒŒåŒ…</span>
        
        </div>
                <div class="action-buttons">
          <button class="back-button" onclick="window.location.href='main_story.html'">è¿”å›ä¸»ç·š</button>
        </div>
      </div>
      
      <!-- ä¸­å¿ƒå…§å®¹å€ -->
      <div class="center-content">
        <div class="page-container">
          <h2 class="achievements-title">æˆå°±ç³»çµ±</h2>
          
          <div class="achievements-summary">
            <div class="summary-item">
              <div class="summary-value">5/20</div>
              <div class="summary-label">å·²å®Œæˆæˆå°±</div>
            </div>
            <div class="summary-item">
              <div class="summary-value">25%</div>
              <div class="summary-label">å®Œæˆåº¦</div>
            </div>
          </div>
          
          <div class="achievements-tabs">
            <div class="tab active">å…¨éƒ¨æˆå°±</div>
            <div class="tab">æ”¶é›†æˆå°±</div>
            <div class="tab">æ¢ç´¢æˆå°±</div>
            <div class="tab">ç ”ç©¶æˆå°±</div>
          </div>
          
          <div class="achievements-list" id="achievementsList">
            <!-- æˆå°±å°‡ç”±JavaScriptå‹•æ…‹è¼‰å…¥ -->
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <script src="../js/points-manager.js"></script>
  <script src="../js/achievement_system.js"></script>
  <script src="../js/menu_click.js"></script>
  <script src="../js/achievement.js"></script>
  <script>
    // è¼‰å…¥æˆå°±åˆ—è¡¨
    function loadAchievements() {
      const achievementsList = document.getElementById('achievementsList');
      const achievements = achievementSystem.getAllAchievements();
      const currentPoints = achievementSystem.getCurrentPoints();
      
      // æ›´æ–°ç ”ç©¶é»æ•¸é¡¯ç¤º
      if (window.pointsManager) {
        window.pointsManager.updateDisplay();
      } else {
        const pointsElement = document.querySelector('.player-info');
        if (pointsElement) {
          pointsElement.textContent = `ç ”ç©¶é»æ•¸: ${currentPoints}`;
        }
      }
      
      // æ›´æ–°çµ±è¨ˆè³‡è¨Š
      const unlockedCount = Object.values(achievements).filter(a => a.unlocked).length;
      const totalCount = Object.keys(achievements).length;
      const completionRate = Math.round((unlockedCount / totalCount) * 100);
      
      document.querySelector('.summary-item:nth-child(1) .summary-value').textContent = `${unlockedCount}/${totalCount}`;
      document.querySelector('.summary-item:nth-child(2) .summary-value').textContent = `${completionRate}%`;
      
      // ç”Ÿæˆæˆå°±å¡ç‰‡
      let html = '';
      Object.values(achievements).forEach(achievement => {
        const isUnlocked = achievement.unlocked;
        const cardClass = isUnlocked ? 'achievement-card' : 'achievement-card achievement-locked';
        const progressWidth = isUnlocked ? '100%' : '0%';
        const statusText = isUnlocked ? 'å·²å®Œæˆ' : 'æœªè§£é–';
        
        html += `
          <div class="${cardClass}">
            <div class="achievement-icon">${achievement.icon}</div>
            <div class="achievement-title">${achievement.title}</div>
            <div class="achievement-description">${achievement.description}</div>
            <div class="achievement-progress">
              <div class="progress-fill" style="width: ${progressWidth};"></div>
            </div>
            <div class="achievement-status">${isUnlocked ? '1/1' : '0/1'}</div>
            ${isUnlocked ? '<div class="achievement-completed">å·²å®Œæˆ</div>' : ''}
          </div>
        `;
      });
      
      achievementsList.innerHTML = html;
    }
    
    // é é¢è¼‰å…¥æ™‚åŸ·è¡Œ
    document.addEventListener('DOMContentLoaded', loadAchievements);
  </script>
</body>
</html>